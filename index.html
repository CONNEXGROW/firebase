// Function to load files accessible to the user
function loadFiles(email) {
    // Mapping of files to authorized emails
    const authorizedFiles = [
        {
            name: "IMG_20230217_083212.jpg",
            url: "https://firebasestorage.googleapis.com/v0/b/connexwebinar.appspot.com/o/IMG_20230217_083212.jpg?alt=media&token=53aecd6f-fdb5-4f2b-89c0-28b0444acc9a",
            authorizedEmails: ["amanmandalbahi@gmail.com", "amanpandey2005216@gmail.com", "user2@example.com"] // Add more emails here
        },
        {
            name: "Payment Receipt",
            url: "https://firebasestorage.googleapis.com/v0/b/connexwebinar.appspot.com/o/PaymentReceipt_2312104003544_51348251_1618381875073_20210414432.pdf?alt=media&token=ea6f96c9-1c6b-44f5-83c1-74d846eadb67",
            authorizedEmails: ["amanmandalbahi@gmail.com", "amanpandey2005216@gmail.com", "user2@example.com"] // Add more emails here
        },
        // Add more files as needed
    ];

    // Find accessible files for the user
    const accessibleFiles = authorizedFiles.filter(file => file.authorizedEmails.includes(email));

    if (accessibleFiles.length > 0) {
        // Automatically open the first file link in Google Docs viewer
        window.open(`https://docs.google.com/gview?url=${encodeURIComponent(accessibleFiles[0].url)}&embedded=true`, "_blank");

        // Clear previous file list
        fileList.innerHTML = '';

        // Display the file links
        accessibleFiles.forEach((file) => {
            const listItem = document.createElement("li");
            listItem.innerHTML = `<a href="https://docs.google.com/gview?url=${encodeURIComponent(file.url)}&embedded=true" target="_blank">${file.name}</a>`;
            fileList.appendChild(listItem);
        });
    } else {
        alert("You do not have access to any files.");
    }
}
